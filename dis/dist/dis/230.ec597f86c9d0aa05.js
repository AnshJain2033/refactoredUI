"use strict";(self.webpackChunkdis=self.webpackChunkdis||[]).push([[230],{8230:(P,m,s)=>{s.r(m),s.d(m,{AdminModule:()=>w});var p=s(6814),d=s(8109),t=s(5879),C=s(953),x=s(7913);let U=(()=>{class o{constructor(){console.log("in admin component")}static#t=this.\u0275fac=function(e){return new(e||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-admin"]],decls:5,vars:1,consts:[[3,"userType"],[1,"routing-container"],[1,"routing"],[1,"routeroutlet"]],template:function(e,i){1&e&&(t._UZ(0,"app-navbar",0),t.TgZ(1,"div",1)(2,"div",2),t._UZ(3,"router-outlet",3),t.qZA()(),t._UZ(4,"app-footer")),2&e&&t.Q6J("userType","head")},dependencies:[d.lC,C.S,x.c],styles:[".routing[_ngcontent-%COMP%]{padding:40px 20px;width:100%}.routing-container[_ngcontent-%COMP%]{width:100%}"]})}return o})();var T=s(5717),a=s(6223),l=s(7700),b=s(6990),Z=s(4698),h=s(3528),S=s(9854),g=s(9862);let A=(()=>{class o{constructor(n,e){this.http=n,this.spinnerService=e,this.serviceUrls=S.q,this.token=sessionStorage.getItem("token"),this.auth=null!==this.token?"Bearer "+this.token:"Bearer ",this.headers=new g.WM({Authorization:this.auth})}uploadCsv(n,e){return this.spinnerService.addSpinner(),console.log(this.serviceUrls.uploadCsv),this.http.post(this.serviceUrls.uploadCsv+"/"+n,e,{headers:this.headers})}static#t=this.\u0275fac=function(e){return new(e||o)(t.LFG(g.eN),t.LFG(h.V))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var f=s(4170),v=s(2296),D=s(8525),F=s(3680);function J(o,y){1&o&&(t.TgZ(0,"h1",10),t._uU(1,"Upload File"),t.qZA())}function I(o,y){if(1&o&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&o){const n=y.$implicit;t.Q6J("value",n),t.xp6(1),t.Oqu(n)}}let O=(()=>{class o{constructor(n,e,i,r,u,N){this.dialogRef=n,this.data=e,this.fb=i,this.toastService=r,this.spinnerService=u,this.fileService=N,this.userTypes=["head","admin","faculty","staff","student"],this.fBulkEnrollment=this.fb.group({userType:["",[a.kI.required]],csv:["",[a.kI.required]]}),this.type=e.type}ngOnInit(){}selectFileInput(n){console.log(n.target.files),this.userCsv=n.target.files[0]}prepareData(n){let e=(0,b.cloneDeep)(n.getRawValue());for(let i in e)e={...e,[i]:"string"==typeof e[i]?e[i].trim():e[i]};return e}uploadCsv(){let n={...this.prepareData(this.fBulkEnrollment)};console.log("this is user type ",n.userType);const e=new FormData;console.log(this.userCsv),n.csv=this.userCsv,console.log(n),e.append("csv",this.userCsv),console.log(e);let i={message:""};try{i=this.fileService.uploadCsv(n.userType,e).subscribe({next:r=>{console.log(r)},error:()=>{this.toastService.error("Unable to upload csv. Please try again."),this.spinnerService.removeSpinner()},complete:()=>{this.toastService.success(i.message),this.spinnerService.removeSpinner(),this.dialogRef.close(n)}})}catch(r){return console.log(r),this.spinnerService.removeSpinner(),void this.toastService.error("Unable to upload csv. Please try again.")}}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(l.so),t.Y36(l.WI),t.Y36(a.qu),t.Y36(Z.jE),t.Y36(h.V),t.Y36(A))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-upload-csv-dialog"]],decls:16,vars:5,consts:[["mat-dialog-title","","style","font-size: 20px; font-weight: 700",4,"ngIf"],[2,"height","50vh","width","35vw","overflow-y","scroll","max-width","70vh"],[1,"d-flex","flex-column","py-2",3,"formGroup"],["appearance","outline"],["formControlName","userType","required",""],[3,"value",4,"ngFor","ngForOf"],["type","file","formControlName","csv",2,"padding","20px",3,"change"],[3,"align"],["mat-stroked-button","","color","warn","cdkFocusInitial","",3,"click"],["mat-raised-button","","color","primary","cdkFocusInitial","",3,"disabled","click"],["mat-dialog-title","",2,"font-size","20px","font-weight","700"],[3,"value"]],template:function(e,i){1&e&&(t.YNc(0,J,2,0,"h1",0),t.TgZ(1,"mat-dialog-content",1)(2,"form",2)(3,"mat-form-field",3)(4,"mat-label"),t._uU(5,"User Type"),t.qZA(),t.TgZ(6,"mat-select",4),t.YNc(7,I,2,2,"mat-option",5),t.qZA()(),t.TgZ(8,"mat-label"),t._uU(9,"Upload CSV"),t.qZA(),t.TgZ(10,"input",6),t.NdJ("change",function(u){return i.selectFileInput(u)}),t.qZA()()(),t.TgZ(11,"mat-dialog-actions",7)(12,"button",8),t.NdJ("click",function(){return i.closeDialog()}),t._uU(13,"Close"),t.qZA(),t.TgZ(14,"button",9),t.NdJ("click",function(){return i.uploadCsv()}),t._uU(15,"Upload"),t.qZA()()),2&e&&(t.Q6J("ngIf","register"==i.type),t.xp6(2),t.Q6J("formGroup",i.fBulkEnrollment),t.xp6(5),t.Q6J("ngForOf",i.userTypes),t.xp6(4),t.Q6J("align","end"),t.xp6(3),t.Q6J("disabled",!i.fBulkEnrollment.valid))},dependencies:[p.sg,p.O5,f.KE,f.hX,v.lW,l.uh,l.xY,l.H8,D.gD,F.ey,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u]})}return o})();var Y=s(6385),c=s(5195);const z=[{path:"",component:U,children:[{path:"",component:(()=>{class o{ngOnInit(){this.renderList=T.f.head}constructor(n,e){this.router=n,this.dialog=e,this.renderList=[]}uploadCsv(n){console.log(n),this.dialog.open(O,{data:{type:n},disableClose:!0})}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(d.F0),t.Y36(l.uw))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-dashboard"]],decls:14,vars:0,consts:[[1,"container"],[1,"content"],["id","card_registration",1,"routing","mat-elevation-z2",2,"background-color","whitesmoke"],[2,"color","#2b32b2","font-size","20px","font-weight","500"],[2,"display","flex","justify-content","center"],[2,"margin-top","5%"],["mat-raised-button","","color","primary","value","register",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title",3),t._uU(5,"User Registration"),t.qZA()(),t._UZ(6,"mat-divider"),t.TgZ(7,"mat-card-content",4)(8,"p"),t._uU(9,"Register/Enroll students, faculty or staff to the system."),t.qZA()(),t._UZ(10,"mat-card-footer"),t.TgZ(11,"mat-card-actions",5)(12,"button",6),t.NdJ("click",function(){return i.uploadCsv("register")}),t._uU(13,"Register"),t.qZA()()()()())},dependencies:[v.lW,Y.d,c.a8,c.hq,c.dn,c.rt,c.dk,c.n5],styles:[".mat-card[_ngcontent-%COMP%]{box-shadow:0 0 10px #9b9b9b,0 1px 1px #9b9b9b,0 1px 3px #9b9b9b}.container[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:wrap}.routing[_ngcontent-%COMP%]{max-width:1400px;width:100%;margin:auto}.content[_ngcontent-%COMP%]{padding:8px}.footer[_ngcontent-%COMP%]{background:linear-gradient(to top,#2b32b2,#1488cc);flex-direction:row;box-sizing:border-box;display:flex;position:fixed;border-radius:3px;justify-content:space-between;height:65px;z-index:1000}"]})}return o})()}]},{path:"**",redirectTo:"login"}];let M=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(z),d.Bz]})}return o})();var k=s(6208),B=s(146);let w=(()=>{class o{static#t=this.\u0275fac=function(e){return new(e||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[p.ez,M,B.q,k.m,a.u5,a.UX]})}return o})()}}]);